{% extends "base-fluid.j2" %}

{% block title %}{{ race.name }} ({{ race.date }}){% endblock %}

{% block styles %}
{% include 'common/datatables-css.j2' %}
{% include 'common/datatables-filter-css.j2' %}
{% endblock %}

{% block content %}

<h1>{{ race.name }} ({{ race.date }})</h1>

<div class="row">
    <div class="col-sm-12">
        <table id="entries" class="table table-striped display nowrap" style="width:100%">
            <thead>
                <tr>
                    <th>Entry #</th>
                    <th>Paddler(s)</th>
                    <th>Category</th>
                    <th>Division</th>
                    <th>Team</th>
                    <th>Race #</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                <tr>
                    <td>{{ entry.entry_number }}</td>
                    <td><a href="{{ url_for('kanoe.entry', entry_id=entry.id) }}">{{ entry }}</a></td>
                    <td>{{ entry.category }}</td>
                    <td>{{ entry.division }}</td>
                    <td>{{ entry.team or "" }}</td>
                    <td>{{ entry.race_number or "" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}

{% block sidebar %}
{% include 'sidebar-race.j2' %}
{% endblock %}

{% block scripts %}
{% include 'common/jquery-javascript.j2' %}
{% include 'common/datatables-javascript.j2' %}
{% include 'common/datatables-filter-javascript.j2' %}
<script type="text/javascript" class="init">
    $(document).ready(function () {
        $('#entries tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Search ' + title + '" />');
        });

        var table = $('#entries').DataTable({
            searchPanes: {
                initCollapsed: true,
                viewTotal: true
            },
            dom: 'Plfrtip'
        });


        table.columns().every(function () {
            var that = this;

            $('input', this.footer()).on('keyup change', function () {
                if (that.search() !== this.value) {
                    that
                        .search(this.value)
                        .draw();
                }
            });
        });
    });
</script>
{% endblock %}