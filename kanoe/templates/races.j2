{% extends "base.j2" %}

{% block title %}Races{% endblock %}

{% block styles %}
{% include 'common/datatables-css.j2' %}
{% endblock %}

{% block content %}

<h1>Races</h1>

<ul>
    <li><a href="{{ url_for('kanoe.race_create') }}">Add a race</a></li>
    <li><a href="{{ url_for('kanoe.series_create') }}">Add a series</a></li>
</ul>

<form method="post" enctype="multipart/form-data">
    <div class="row">
        <div class="col-sm-6">
            <table id="races" class="table table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Series</th>
                        <th>Entries</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for race in races %}
                    <tr>
                        <td><a href="{{ url_for('kanoe.race', race_id=race.id) }}">{{ race.name }}</a></td>
                        <td>{{ race.date }}</td>
                        <td>{{ race.series }}</td>
                        <td>{{ race.count }}</td>
                        <td><input type="checkbox" class="form-check-input" id="race_id_{{ race.id }}"
                                name="race_id_{{ race.id }}"></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-sm-4 offset-sm-2">
            <div class="d-grid gap-2 my-5">
                <h2>Add Entries</h2>
                <ol>
                    <li>Choose a JSON file with race entries.
                    <li>Select one or more races for the entries.
                </ol>
                <div class="form-group">
                    <label>JSON file</label>
                    <input type="file" class="form-control-file" name="file">
                </div>
                <div class="form-group">
                    <label>Race</label>
                    <select class="form-select form-select-sm" name="race">
                        <option value="" selected></option>
                        {% for race in races %}
                        <option value="{{ race.id }}">{{ race.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label>Series</label>
                    <select class="form-select form-select-sm" name="series">
                        <option value="" selected></option>
                        {% for series in serieses %}
                        <option value="{{ series.id }}">{{ series.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <hr class="my-4">
                <button type="submit" class="btn btn-primary" value="Upload">Add Entries</button>
            </div>
        </div>
    </div>
</form>

{% endblock %}